<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en" data-mode="light">
  <!-- The Head -->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  >

  

  

  
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="O3 Cpu Gem5" />
<meta property="og:locale" content="en" />
<meta name="description" content="Python derives O3CPU through DerivO3CPU class To understand particular processor in the GEM5, it is easy to start from the script that instantiate the processor. We can easily find that lots of GEM5 provided default script utilize DerivO3CPU to attach the O3 CPU to the system." />
<meta property="og:description" content="Python derives O3CPU through DerivO3CPU class To understand particular processor in the GEM5, it is easy to start from the script that instantiate the processor. We can easily find that lots of GEM5 provided default script utilize DerivO3CPU to attach the O3 CPU to the system." />
<link rel="canonical" href="http://localhost:4000/posts/O3-CPU-GEM5/" />
<meta property="og:url" content="http://localhost:4000/posts/O3-CPU-GEM5/" />
<meta property="og:site_name" content="Ruach" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-05-26T00:00:00-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="O3 Cpu Gem5" />
<meta name="twitter:site" content="@ruach_lee" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-05-26T00:00:00-04:00","datePublished":"2021-05-26T00:00:00-04:00","description":"Python derives O3CPU through DerivO3CPU class To understand particular processor in the GEM5, it is easy to start from the script that instantiate the processor. We can easily find that lots of GEM5 provided default script utilize DerivO3CPU to attach the O3 CPU to the system.","headline":"O3 Cpu Gem5","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/posts/O3-CPU-GEM5/"},"url":"http://localhost:4000/posts/O3-CPU-GEM5/"}</script>
<!-- End Jekyll SEO tag -->

  

  <title>O3 Cpu Gem5 | Ruach
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">
<link rel="manifest" href="/assets/img/favicons/site.webmanifest">
<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Ruach">
<meta name="application-name" content="Ruach">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin>
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
    

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">
  

  <!-- GA -->
  

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css">

  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.2/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Manific Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css">
  

  <!-- JavaScript -->

  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle">
      
        
        <img src="/assets/img/jaehyuk.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'">
      
    </a>

    <h1 class="site-title">
      <a href="/">Ruach</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">Security Researcher at Gatech</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    

    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['jaehyuk','gatech.edu'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="https://www.linkedin.com/in/jaehyuk-lee-29b33b121/"
          aria-label="linkedin"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-linkedin"></i>
        </a>
      
    
      

      
        <a
          href="https://github.com/Ruach"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://stackoverflow.com/users/4460514/ruach?tab=profile"
          aria-label="stack-overflow"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-stack-overflow"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">
                Home
              </a>
            </span>

          
        
          
        
          
            
              <span>O3 Cpu Gem5</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->





<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>O3 Cpu Gem5</h1>

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1622001600"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  May 26, 2021
</time>

      </span>

      <!-- lastmod date -->
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              <a href="https://ruach.github.io">Jaehyuk Lee</a>
            
          </em>
        </span>

        <!-- read time -->
        <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="2291 words"
>
  <em>12 min</em> read</span>

      </div>
      <!-- .d-flex -->
    </div>
    <!-- .post-meta -->
  </header>

  <div class="content">
    <h2 id="python-derives-o3cpu-through-derivo3cpu-class"><span class="me-2">Python derives O3CPU through DerivO3CPU class</span><a href="#python-derives-o3cpu-through-derivo3cpu-class" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<p>To understand particular processor in the GEM5, 
it is easy to start from the script that instantiate the processor. 
We can easily find that lots of GEM5 provided default script utilize 
DerivO3CPU to attach the O3 CPU to the system.</p>

<p><em>gem5/src/cpu/o3/O3CPU.py</em></p>
<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="rouge-code"><pre> <span class="mi">61</span> <span class="k">class</span> <span class="nc">DerivO3CPU</span><span class="p">(</span><span class="n">BaseCPU</span><span class="p">):</span>
 <span class="mi">62</span>     <span class="nb">type</span> <span class="o">=</span> <span class="sh">'</span><span class="s">DerivO3CPU</span><span class="sh">'</span>
 <span class="mi">63</span>     <span class="n">cxx_header</span> <span class="o">=</span> <span class="sh">'</span><span class="s">cpu/o3/deriv.hh</span><span class="sh">'</span>
 <span class="mi">64</span> 
 <span class="mi">65</span>     <span class="nd">@classmethod</span>
 <span class="mi">66</span>     <span class="k">def</span> <span class="nf">memory_mode</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
 <span class="mi">67</span>         <span class="k">return</span> <span class="sh">'</span><span class="s">timing</span><span class="sh">'</span>
 <span class="mi">68</span> 
 <span class="mi">69</span>     <span class="nd">@classmethod</span>
 <span class="mi">70</span>     <span class="k">def</span> <span class="nf">require_caches</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
 <span class="mi">71</span>         <span class="k">return</span> <span class="bp">True</span>
 <span class="mi">72</span> 
 <span class="mi">73</span>     <span class="nd">@classmethod</span>
 <span class="mi">74</span>     <span class="k">def</span> <span class="nf">support_take_over</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
 <span class="mi">75</span>         <span class="k">return</span> <span class="bp">True</span>
 <span class="mi">76</span> 
 <span class="mi">77</span>     <span class="n">activity</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Unsigned</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="sh">"</span><span class="s">Initial count</span><span class="sh">"</span><span class="p">)</span>
 <span class="mi">78</span> 
 <span class="mi">79</span>     <span class="n">cacheStorePorts</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Unsigned</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="sh">"</span><span class="s">Cache Ports. </span><span class="sh">"</span>
 <span class="mi">80</span>           <span class="sh">"</span><span class="s">Constrains stores only.</span><span class="sh">"</span><span class="p">)</span>
 <span class="mi">81</span>     <span class="n">cacheLoadPorts</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Unsigned</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="sh">"</span><span class="s">Cache Ports. </span><span class="sh">"</span>
 <span class="mi">82</span>           <span class="sh">"</span><span class="s">Constrains loads only.</span><span class="sh">"</span><span class="p">)</span>
 <span class="mi">83</span> 
 <span class="mi">84</span>     <span class="n">decodeToFetchDelay</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Cycles</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="sh">"</span><span class="s">Decode to fetch delay</span><span class="sh">"</span><span class="p">)</span>
 <span class="mi">85</span>     <span class="n">renameToFetchDelay</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Cycles</span><span class="p">(</span><span class="mi">1</span> <span class="p">,</span><span class="sh">"</span><span class="s">Rename to fetch delay</span><span class="sh">"</span><span class="p">)</span>
 <span class="mi">86</span>     <span class="n">iewToFetchDelay</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Cycles</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="sh">"</span><span class="s">Issue/Execute/Writeback to fetch </span><span class="sh">"</span>
 <span class="mi">87</span>                                    <span class="sh">"</span><span class="s">delay</span><span class="sh">"</span><span class="p">)</span>
 <span class="mi">88</span>     <span class="n">commitToFetchDelay</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Cycles</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="sh">"</span><span class="s">Commit to fetch delay</span><span class="sh">"</span><span class="p">)</span>
 <span class="mi">89</span>     <span class="n">fetchWidth</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Unsigned</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="sh">"</span><span class="s">Fetch width</span><span class="sh">"</span><span class="p">)</span>
 <span class="mi">90</span>     <span class="n">fetchBufferSize</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Unsigned</span><span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="sh">"</span><span class="s">Fetch buffer size in bytes</span><span class="sh">"</span><span class="p">)</span>
 <span class="mi">91</span>     <span class="n">fetchQueueSize</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Unsigned</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="sh">"</span><span class="s">Fetch queue size in micro-ops </span><span class="sh">"</span>
 <span class="mi">92</span>                                     <span class="sh">"</span><span class="s">per-thread</span><span class="sh">"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>
<p><strong>DerivO3CPU</strong> is used to instantiate the O3CPU in the runscript of the GEM5.
Similar to other m5 objects of the processors, it also inherits from the BaseCPU m5 class. 
Also it sets the parameters of the O3CPU which will be accessed by the DerivO3CPUParams later 
in the CPP implementation of this class.</p>

<p><em>gem5/src/cpu/o3/derive.hh</em></p>
<div class="language-cpp highlighter-rouge"><div class="code-header">
        <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="cp">#ifndef __CPU_O3_DERIV_HH__
#define __CPU_O3_DERIV_HH__
</span>
<span class="cp">#include</span> <span class="cpf">"cpu/o3/cpu.hh"</span><span class="cp">
#include</span> <span class="cpf">"cpu/o3/impl.hh"</span><span class="cp">
#include</span> <span class="cpf">"params/DerivO3CPU.hh"</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">DerivO3CPU</span> <span class="o">:</span> <span class="k">public</span> <span class="n">FullO3CPU</span><span class="o">&lt;</span><span class="n">O3CPUImpl</span><span class="o">&gt;</span>
<span class="p">{</span>
  <span class="nl">public:</span>
    <span class="n">DerivO3CPU</span><span class="p">(</span><span class="n">DerivO3CPUParams</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span>
        <span class="o">:</span> <span class="n">FullO3CPU</span><span class="o">&lt;</span><span class="n">O3CPUImpl</span><span class="o">&gt;</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="p">{</span> <span class="p">}</span>
<span class="p">};</span>
<span class="cp">#endif // __CPU_O3_DERIV_HH__
</span></pre></td></tr></tbody></table></code></div></div>
<p>Contrary to my expectation, the DerivO3CPU class doesn’t have any definitions to 
emulate the O3CPU, but just inherits from the FullO3CPU with O3CPUImpl for the class template instantiation. 
Therefore, we can reasonably guess that all the implementations are done by the FullO3CPU. 
Before we go deep down, let’s take a look at the class hierarchies of this CPU.</p>

<p><em>gem5/src/o3/cpu.hh</em></p>
<div class="language-cpp highlighter-rouge"><div class="code-header">
        <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="rouge-code"><pre><span class="mi">83</span> <span class="k">class</span> <span class="nc">BaseO3CPU</span> <span class="o">:</span> <span class="k">public</span> <span class="n">BaseCPU</span>
 <span class="mi">84</span> <span class="p">{</span>
 <span class="mi">85</span>     <span class="c1">//Stuff that's pretty ISA independent will go here.</span>
 <span class="mi">86</span>   <span class="k">public</span><span class="o">:</span>
 <span class="mi">87</span>     <span class="n">BaseO3CPU</span><span class="p">(</span><span class="n">BaseCPUParams</span> <span class="o">*</span><span class="n">params</span><span class="p">);</span>
 <span class="mi">88</span> 
 <span class="mi">89</span>     <span class="kt">void</span> <span class="n">regStats</span><span class="p">();</span>
 <span class="mi">90</span> <span class="p">};</span>
 <span class="mi">91</span> 
 <span class="mi">92</span> <span class="cm">/**
 93  * FullO3CPU class, has each of the stages (fetch through commit)
 94  * within it, as well as all of the time buffers between stages.  The
 95  * tick() function for the CPU is defined here.
 96  */</span>
 <span class="mi">97</span> <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Impl</span><span class="p">&gt;</span>
 <span class="mi">98</span> <span class="k">class</span> <span class="nc">FullO3CPU</span> <span class="o">:</span> <span class="k">public</span> <span class="n">BaseO3CPU</span>
 <span class="mi">99</span> <span class="p">{</span>
<span class="mi">100</span>   <span class="k">public</span><span class="o">:</span>
<span class="mi">101</span>     <span class="c1">// Typedefs from the Impl here.</span>
<span class="mi">102</span>     <span class="k">typedef</span> <span class="k">typename</span> <span class="n">Impl</span><span class="o">::</span><span class="n">CPUPol</span> <span class="n">CPUPolicy</span><span class="p">;</span>
<span class="mi">103</span>     <span class="k">typedef</span> <span class="k">typename</span> <span class="n">Impl</span><span class="o">::</span><span class="n">DynInstPtr</span> <span class="n">DynInstPtr</span><span class="p">;</span>
<span class="mi">104</span>     <span class="k">typedef</span> <span class="k">typename</span> <span class="n">Impl</span><span class="o">::</span><span class="n">O3CPU</span> <span class="n">O3CPU</span><span class="p">;</span>
<span class="mi">105</span> 
<span class="mi">106</span>     <span class="k">using</span> <span class="n">VecElem</span> <span class="o">=</span>  <span class="n">TheISA</span><span class="o">::</span><span class="n">VecElem</span><span class="p">;</span>
<span class="mi">107</span>     <span class="k">using</span> <span class="n">VecRegContainer</span> <span class="o">=</span>  <span class="n">TheISA</span><span class="o">::</span><span class="n">VecRegContainer</span><span class="p">;</span>
<span class="mi">108</span> 
<span class="mi">109</span>     <span class="k">using</span> <span class="n">VecPredRegContainer</span> <span class="o">=</span> <span class="n">TheISA</span><span class="o">::</span><span class="n">VecPredRegContainer</span><span class="p">;</span>
<span class="mi">110</span> 
<span class="mi">111</span>     <span class="k">typedef</span> <span class="n">O3ThreadState</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">ImplState</span><span class="p">;</span>
<span class="mi">112</span>     <span class="k">typedef</span> <span class="n">O3ThreadState</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">Thread</span><span class="p">;</span>
<span class="mi">113</span> 
<span class="mi">114</span>     <span class="k">typedef</span> <span class="k">typename</span> <span class="n">std</span><span class="o">::</span><span class="n">list</span><span class="o">&lt;</span><span class="n">DynInstPtr</span><span class="o">&gt;::</span><span class="n">iterator</span> <span class="n">ListIt</span><span class="p">;</span>
<span class="mi">115</span> 
<span class="mi">116</span>     <span class="k">friend</span> <span class="k">class</span> <span class="nc">O3ThreadContext</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">......</span>
</pre></td></tr></tbody></table></code></div></div>

<p>The FullO3CPU is the main CPU class for the O3 CPU. We can find that this FullO3CPU 
inherits BaseO3CPU inheriting BaseCPU. In GEM5, all the CPU classes basically 
inherits the BaseCPU class. Remember that the DerivO3CPU also inherits from the BaseCPU m5 object,
which generates the proper interfaces to access the parameters of the DerivO3CPU and BaseCPU in the 
CPP implementation of those classes. To understand the relationship of those two classes, 
it would be good to take a look at the constructor of those two classes.</p>

<p><em>gem5/src/o3/cpu.cc</em></p>
<div class="language-cpp highlighter-rouge"><div class="code-header">
        <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
</pre></td><td class="rouge-code"><pre>  <span class="mi">82</span> <span class="n">BaseO3CPU</span><span class="o">::</span><span class="n">BaseO3CPU</span><span class="p">(</span><span class="n">BaseCPUParams</span> <span class="o">*</span><span class="n">params</span><span class="p">)</span>
  <span class="mi">83</span>     <span class="o">:</span> <span class="n">BaseCPU</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
  <span class="mi">84</span> <span class="p">{</span>
  <span class="mi">85</span> <span class="p">}</span>
<span class="p">......</span>
  <span class="mi">93</span> <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Impl</span><span class="p">&gt;</span>
  <span class="mi">94</span> <span class="n">FullO3CPU</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;::</span><span class="n">FullO3CPU</span><span class="p">(</span><span class="n">DerivO3CPUParams</span> <span class="o">*</span><span class="n">params</span><span class="p">)</span>
  <span class="mi">95</span>     <span class="o">:</span> <span class="n">BaseO3CPU</span><span class="p">(</span><span class="n">params</span><span class="p">),</span>
  <span class="mi">96</span>       <span class="nf">itb</span><span class="p">(</span><span class="n">params</span><span class="o">-&gt;</span><span class="n">itb</span><span class="p">),</span>
  <span class="mi">97</span>       <span class="n">dtb</span><span class="p">(</span><span class="n">params</span><span class="o">-&gt;</span><span class="n">dtb</span><span class="p">),</span>
  <span class="mi">98</span>       <span class="n">tickEvent</span><span class="p">([</span><span class="k">this</span><span class="p">]{</span> <span class="n">tick</span><span class="p">();</span> <span class="p">},</span> <span class="s">"FullO3CPU tick"</span><span class="p">,</span>
  <span class="mi">99</span>                 <span class="nb">false</span><span class="p">,</span> <span class="n">Event</span><span class="o">::</span><span class="n">CPU_Tick_Pri</span><span class="p">),</span>
 <span class="mi">100</span>       <span class="nf">threadExitEvent</span><span class="p">([</span><span class="k">this</span><span class="p">]{</span> <span class="n">exitThreads</span><span class="p">();</span> <span class="p">},</span> <span class="s">"FullO3CPU exit threads"</span><span class="p">,</span>
 <span class="mi">101</span>                 <span class="nb">false</span><span class="p">,</span> <span class="n">Event</span><span class="o">::</span><span class="n">CPU_Exit_Pri</span><span class="p">),</span>
 <span class="mi">102</span> <span class="err">#</span><span class="n">ifndef</span> <span class="n">NDEBUG</span>
 <span class="mi">103</span>       <span class="n">instcount</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
 <span class="mi">104</span> <span class="err">#</span><span class="n">endif</span>
 <span class="mi">105</span>       <span class="n">removeInstsThisCycle</span><span class="p">(</span><span class="nb">false</span><span class="p">),</span>
 <span class="mi">106</span>       <span class="n">fetch</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">params</span><span class="p">),</span>
 <span class="mi">107</span>       <span class="n">decode</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">params</span><span class="p">),</span>
 <span class="mi">108</span>       <span class="n">rename</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">params</span><span class="p">),</span>
 <span class="mi">109</span>       <span class="n">iew</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">params</span><span class="p">),</span>
 <span class="mi">110</span>       <span class="n">commit</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">params</span><span class="p">),</span>
 <span class="mi">111</span> 
 <span class="mi">112</span>       <span class="cm">/* It is mandatory that all SMT threads use the same renaming mode as
 113        * they are sharing registers and rename */</span>
 <span class="mi">114</span>       <span class="n">vecMode</span><span class="p">(</span><span class="n">RenameMode</span><span class="o">&lt;</span><span class="n">TheISA</span><span class="o">::</span><span class="n">ISA</span><span class="o">&gt;::</span><span class="n">init</span><span class="p">(</span><span class="n">params</span><span class="o">-&gt;</span><span class="n">isa</span><span class="p">[</span><span class="mi">0</span><span class="p">])),</span>
 <span class="mi">115</span>       <span class="n">regFile</span><span class="p">(</span><span class="n">params</span><span class="o">-&gt;</span><span class="n">numPhysIntRegs</span><span class="p">,</span>
 <span class="mi">116</span>               <span class="n">params</span><span class="o">-&gt;</span><span class="n">numPhysFloatRegs</span><span class="p">,</span>
 <span class="mi">117</span>               <span class="n">params</span><span class="o">-&gt;</span><span class="n">numPhysVecRegs</span><span class="p">,</span>
 <span class="mi">118</span>               <span class="n">params</span><span class="o">-&gt;</span><span class="n">numPhysVecPredRegs</span><span class="p">,</span>
 <span class="mi">119</span>               <span class="n">params</span><span class="o">-&gt;</span><span class="n">numPhysCCRegs</span><span class="p">,</span>
 <span class="mi">120</span>               <span class="n">vecMode</span><span class="p">),</span>
 <span class="mi">121</span> 
 <span class="mi">122</span>       <span class="n">freeList</span><span class="p">(</span><span class="n">name</span><span class="p">()</span> <span class="o">+</span> <span class="s">".freelist"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">regFile</span><span class="p">),</span>
 <span class="mi">123</span> 
 <span class="mi">124</span>       <span class="n">rob</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">params</span><span class="p">),</span>
 <span class="mi">125</span> 
 <span class="mi">126</span>       <span class="n">scoreboard</span><span class="p">(</span><span class="n">name</span><span class="p">()</span> <span class="o">+</span> <span class="s">".scoreboard"</span><span class="p">,</span>
 <span class="mi">127</span>                  <span class="n">regFile</span><span class="p">.</span><span class="n">totalNumPhysRegs</span><span class="p">()),</span>
 <span class="mi">128</span> 
 <span class="mi">129</span>       <span class="n">isa</span><span class="p">(</span><span class="n">numThreads</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">),</span>
 <span class="mi">130</span> 
 <span class="mi">131</span>       <span class="n">timeBuffer</span><span class="p">(</span><span class="n">params</span><span class="o">-&gt;</span><span class="n">backComSize</span><span class="p">,</span> <span class="n">params</span><span class="o">-&gt;</span><span class="n">forwardComSize</span><span class="p">),</span>
 <span class="mi">132</span>       <span class="n">fetchQueue</span><span class="p">(</span><span class="n">params</span><span class="o">-&gt;</span><span class="n">backComSize</span><span class="p">,</span> <span class="n">params</span><span class="o">-&gt;</span><span class="n">forwardComSize</span><span class="p">),</span>
 <span class="mi">133</span>       <span class="n">decodeQueue</span><span class="p">(</span><span class="n">params</span><span class="o">-&gt;</span><span class="n">backComSize</span><span class="p">,</span> <span class="n">params</span><span class="o">-&gt;</span><span class="n">forwardComSize</span><span class="p">),</span>
 <span class="mi">134</span>       <span class="n">renameQueue</span><span class="p">(</span><span class="n">params</span><span class="o">-&gt;</span><span class="n">backComSize</span><span class="p">,</span> <span class="n">params</span><span class="o">-&gt;</span><span class="n">forwardComSize</span><span class="p">),</span>
 <span class="mi">135</span>       <span class="n">iewQueue</span><span class="p">(</span><span class="n">params</span><span class="o">-&gt;</span><span class="n">backComSize</span><span class="p">,</span> <span class="n">params</span><span class="o">-&gt;</span><span class="n">forwardComSize</span><span class="p">),</span>
 <span class="mi">136</span>       <span class="n">activityRec</span><span class="p">(</span><span class="n">name</span><span class="p">(),</span> <span class="n">NumStages</span><span class="p">,</span>
 <span class="mi">137</span>                   <span class="n">params</span><span class="o">-&gt;</span><span class="n">backComSize</span> <span class="o">+</span> <span class="n">params</span><span class="o">-&gt;</span><span class="n">forwardComSize</span><span class="p">,</span>
 <span class="mi">138</span>                   <span class="n">params</span><span class="o">-&gt;</span><span class="n">activity</span><span class="p">),</span>
 <span class="mi">139</span> 
 <span class="mi">140</span>       <span class="n">globalSeqNum</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
 <span class="mi">141</span>       <span class="n">system</span><span class="p">(</span><span class="n">params</span><span class="o">-&gt;</span><span class="n">system</span><span class="p">),</span>
 <span class="mi">142</span>       <span class="n">lastRunningCycle</span><span class="p">(</span><span class="n">curCycle</span><span class="p">())</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Note that FullO3CPU passes the params to the BaseO3CPU which further passes the params
to the BaseCPU’s constructor. Remember that all the processors on the GEM5 should implement the 
BaseCPU in addition to their additional semantic. Therefore, after FullO3CPU first initializes 
its member field using the passed parameters, it should pass the parameter to the BaseCPU to 
finish base processor configurations. 
One interesting thing to note is that FullO3CPU is a template class which adopts 
another class called Impl that should be replaced with proper class to be used. 
Therefore, DerivO3CPU inherits the FullO3CPU<O3CPUImpl> not the FullO3CPU alone. 
Let's take a look at what is the O3CPUImpl.</O3CPUImpl></p>

<p><em>gem5/src/cpu/o3/impl.hh</em></p>
<div class="language-cpp highlighter-rouge"><div class="code-header">
        <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre></td><td class="rouge-code"><pre> <span class="mi">38</span> <span class="c1">// Forward declarations.</span>
 <span class="mi">39</span> <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Impl</span><span class="p">&gt;</span>
 <span class="mi">40</span> <span class="k">class</span> <span class="nc">BaseO3DynInst</span><span class="p">;</span>
 <span class="mi">41</span> 
 <span class="mi">42</span> <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Impl</span><span class="p">&gt;</span>
 <span class="mi">43</span> <span class="k">class</span> <span class="nc">FullO3CPU</span><span class="p">;</span>
 <span class="mi">44</span> 
 <span class="mi">45</span> <span class="cm">/** Implementation specific struct that defines several key types to the
 46  *  CPU, the stages within the CPU, the time buffers, and the DynInst.
 47  *  The struct defines the ISA, the CPU policy, the specific DynInst, the
 48  *  specific O3CPU, and all of the structs from the time buffers to do
 49  *  communication.
 50  *  This is one of the key things that must be defined for each hardware
 51  *  specific CPU implementation.
 52  */</span>
 <span class="mi">53</span> <span class="k">struct</span> <span class="nc">O3CPUImpl</span>
 <span class="mi">54</span> <span class="p">{</span>
 <span class="mi">55</span>     <span class="cm">/** The type of MachInst. */</span>
 <span class="mi">56</span>     <span class="k">typedef</span> <span class="n">TheISA</span><span class="o">::</span><span class="n">MachInst</span> <span class="n">MachInst</span><span class="p">;</span>
 <span class="mi">57</span> 
 <span class="mi">58</span>     <span class="cm">/** The CPU policy to be used, which defines all of the CPU stages. */</span>
 <span class="mi">59</span>     <span class="k">typedef</span> <span class="n">SimpleCPUPolicy</span><span class="o">&lt;</span><span class="n">O3CPUImpl</span><span class="o">&gt;</span> <span class="n">CPUPol</span><span class="p">;</span>
 <span class="mi">60</span> 
 <span class="mi">61</span>     <span class="cm">/** The DynInst type to be used. */</span>
 <span class="mi">62</span>     <span class="k">typedef</span> <span class="n">BaseO3DynInst</span><span class="o">&lt;</span><span class="n">O3CPUImpl</span><span class="o">&gt;</span> <span class="n">DynInst</span><span class="p">;</span>
 <span class="mi">63</span> 
 <span class="mi">64</span>     <span class="cm">/** The refcounted DynInst pointer to be used.  In most cases this is
 65      *  what should be used, and not DynInst *.
 66      */</span>
 <span class="mi">67</span>     <span class="k">typedef</span> <span class="n">RefCountingPtr</span><span class="o">&lt;</span><span class="n">DynInst</span><span class="o">&gt;</span> <span class="n">DynInstPtr</span><span class="p">;</span>
 <span class="mi">68</span>     <span class="k">typedef</span> <span class="n">RefCountingPtr</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">DynInst</span><span class="o">&gt;</span> <span class="n">DynInstConstPtr</span><span class="p">;</span>
 <span class="mi">69</span> 
 <span class="mi">70</span>     <span class="cm">/** The O3CPU type to be used. */</span>
 <span class="mi">71</span>     <span class="k">typedef</span> <span class="n">FullO3CPU</span><span class="o">&lt;</span><span class="n">O3CPUImpl</span><span class="o">&gt;</span> <span class="n">O3CPU</span><span class="p">;</span>
 <span class="mi">72</span> 
 <span class="mi">73</span>     <span class="cm">/** Same typedef, but for CPUType.  BaseDynInst may not always use
 74      * an O3 CPU, so it's clearer to call it CPUType instead in that
 75      * case.
 76      */</span>
 <span class="mi">77</span>     <span class="k">typedef</span> <span class="n">O3CPU</span> <span class="n">CPUType</span><span class="p">;</span>
 <span class="mi">78</span> 
 <span class="mi">79</span>     <span class="k">enum</span> <span class="p">{</span>
 <span class="mi">80</span>       <span class="n">MaxWidth</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
 <span class="mi">81</span>       <span class="n">MaxThreads</span> <span class="o">=</span> <span class="mi">4</span>
 <span class="mi">82</span>     <span class="p">};</span>
 <span class="mi">83</span> <span class="p">};</span>
</pre></td></tr></tbody></table></code></div></div>

<p>GEM5 defines structure called O3CPUImpl 
that instantiates all template classes associated with O3 CPU. 
One of the instantiated template class is FullO3CPU (Line 71).
By instantiating the FullO3CPU class with the O3CPUImpl class, 
it defines complete FullO3CPU class called O3CPU. The O3CPU type will be used later frequently 
to indicate the O3CPU in the other parts of the O3CPU implementations. 
Also, other uncompleted class templates are instantiated with the O3CPUImpl class.
Let’s revisit the FullO3CPU class once again to take a look at how the 
O3CPUImpl class will be utilized as an Impl template.</p>

<p><em>gem5/src/o3/cpu.hh</em></p>
<div class="language-cpp highlighter-rouge"><div class="code-header">
        <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre> <span class="mi">97</span> <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Impl</span><span class="p">&gt;</span>
 <span class="mi">98</span> <span class="k">class</span> <span class="nc">FullO3CPU</span> <span class="o">:</span> <span class="k">public</span> <span class="n">BaseO3CPU</span>
 <span class="mi">99</span> <span class="p">{</span>
<span class="mi">100</span>   <span class="k">public</span><span class="o">:</span>
<span class="mi">101</span>     <span class="c1">// Typedefs from the Impl here.</span>
<span class="mi">102</span>     <span class="k">typedef</span> <span class="k">typename</span> <span class="n">Impl</span><span class="o">::</span><span class="n">CPUPol</span> <span class="n">CPUPolicy</span><span class="p">;</span>
<span class="mi">103</span>     <span class="k">typedef</span> <span class="k">typename</span> <span class="n">Impl</span><span class="o">::</span><span class="n">DynInstPtr</span> <span class="n">DynInstPtr</span><span class="p">;</span>
<span class="mi">104</span>     <span class="k">typedef</span> <span class="k">typename</span> <span class="n">Impl</span><span class="o">::</span><span class="n">O3CPU</span> <span class="n">O3CPU</span><span class="p">;</span>
<span class="p">......</span>
<span class="mi">558</span>   <span class="k">protected</span><span class="o">:</span>
<span class="mi">559</span>     <span class="cm">/** The fetch stage. */</span>
<span class="mi">560</span>     <span class="k">typename</span> <span class="n">CPUPolicy</span><span class="o">::</span><span class="n">Fetch</span> <span class="n">fetch</span><span class="p">;</span>
<span class="mi">561</span> 
<span class="mi">562</span>     <span class="cm">/** The decode stage. */</span>
<span class="mi">563</span>     <span class="k">typename</span> <span class="n">CPUPolicy</span><span class="o">::</span><span class="n">Decode</span> <span class="n">decode</span><span class="p">;</span>
<span class="mi">564</span> 
<span class="mi">565</span>     <span class="cm">/** The dispatch stage. */</span>
<span class="mi">566</span>     <span class="k">typename</span> <span class="n">CPUPolicy</span><span class="o">::</span><span class="n">Rename</span> <span class="n">rename</span><span class="p">;</span>
<span class="mi">567</span> 
<span class="mi">568</span>     <span class="cm">/** The issue/execute/writeback stages. */</span>
<span class="mi">569</span>     <span class="k">typename</span> <span class="n">CPUPolicy</span><span class="o">::</span><span class="n">IEW</span> <span class="n">iew</span><span class="p">;</span>
<span class="mi">570</span> 
<span class="mi">571</span>     <span class="cm">/** The commit stage. */</span>
<span class="mi">572</span>     <span class="k">typename</span> <span class="n">CPUPolicy</span><span class="o">::</span><span class="n">Commit</span> <span class="n">commit</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></div></div>

<p>First of all, it defines new typenames by utilizing the member field of the 
Impl class. Note that those are also typedef of some classes 
retrieved by instantiating specific class templates defined for O3 CPU. 
For example, CPUPolicy is set an alias of Impl::CPUPol which is a
typedef of SimpleCPUPolicy<O3CPUImpl> defined in the O3CPUImpl.
Therefore, in short, CPUPolicy equals SimpleCPUPolicy<O3CPUImpl>. 
Those types in the FullO3CPU class will be used in declaring pipeline stages of the O3CPU. 
As shown in the line 558-572, it utilizes the CPUPolicy type 
to define different pipeline stages (e.g., fetch, decode).
Therefore, to understand the each stage of the pipeline of the O3CPU, we should 
take a look at the SimpleCPUPolicy class.</O3CPUImpl></O3CPUImpl></p>

<p><em>gem5/src/cpu/o3/cpu_policy.hh</em></p>
<div class="language-cpp highlighter-rouge"><div class="code-header">
        <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
</pre></td><td class="rouge-code"><pre> <span class="mi">51</span> <span class="cm">/**
 52  * Struct that defines the key classes to be used by the CPU.  All
 53  * classes use the typedefs defined here to determine what are the
 54  * classes of the other stages and communication buffers.  In order to
 55  * change a structure such as the IQ, simply change the typedef here
 56  * to use the desired class instead, and recompile.  In order to
 57  * create a different CPU to be used simultaneously with this one, see
 58  * the alpha_impl.hh file for instructions.
 59  */</span>
 <span class="mi">60</span> <span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">Impl</span><span class="p">&gt;</span>
 <span class="mi">61</span> <span class="k">struct</span> <span class="nc">SimpleCPUPolicy</span>
 <span class="mi">62</span> <span class="p">{</span>
 <span class="mi">63</span>     <span class="cm">/** Typedef for the freelist of registers. */</span>
 <span class="mi">64</span>     <span class="k">typedef</span> <span class="n">UnifiedFreeList</span> <span class="n">FreeList</span><span class="p">;</span>
 <span class="mi">65</span>     <span class="cm">/** Typedef for the rename map. */</span>
 <span class="mi">66</span>     <span class="k">typedef</span> <span class="n">UnifiedRenameMap</span> <span class="n">RenameMap</span><span class="p">;</span>
 <span class="mi">67</span>     <span class="cm">/** Typedef for the ROB. */</span>
 <span class="mi">68</span>     <span class="k">typedef</span> <span class="o">::</span><span class="n">ROB</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">ROB</span><span class="p">;</span>
 <span class="mi">69</span>     <span class="cm">/** Typedef for the instruction queue/scheduler. */</span>
 <span class="mi">70</span>     <span class="k">typedef</span> <span class="n">InstructionQueue</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">IQ</span><span class="p">;</span>
 <span class="mi">71</span>     <span class="cm">/** Typedef for the memory dependence unit. */</span>
 <span class="mi">72</span>     <span class="k">typedef</span> <span class="o">::</span><span class="n">MemDepUnit</span><span class="o">&lt;</span><span class="n">StoreSet</span><span class="p">,</span> <span class="n">Impl</span><span class="o">&gt;</span> <span class="n">MemDepUnit</span><span class="p">;</span>
 <span class="mi">73</span>     <span class="cm">/** Typedef for the LSQ. */</span>
 <span class="mi">74</span>     <span class="k">typedef</span> <span class="o">::</span><span class="n">LSQ</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">LSQ</span><span class="p">;</span>
 <span class="mi">75</span>     <span class="cm">/** Typedef for the thread-specific LSQ units. */</span>
 <span class="mi">76</span>     <span class="k">typedef</span> <span class="o">::</span><span class="n">LSQUnit</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">LSQUnit</span><span class="p">;</span>
 <span class="mi">77</span> 
 <span class="mi">78</span>     <span class="cm">/** Typedef for fetch. */</span>
 <span class="mi">79</span>     <span class="k">typedef</span> <span class="n">DefaultFetch</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">Fetch</span><span class="p">;</span>
 <span class="mi">80</span>     <span class="cm">/** Typedef for decode. */</span>
 <span class="mi">81</span>     <span class="k">typedef</span> <span class="n">DefaultDecode</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">Decode</span><span class="p">;</span>
 <span class="mi">82</span>     <span class="cm">/** Typedef for rename. */</span>
 <span class="mi">83</span>     <span class="k">typedef</span> <span class="n">DefaultRename</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">Rename</span><span class="p">;</span>
 <span class="mi">84</span>     <span class="cm">/** Typedef for Issue/Execute/Writeback. */</span>
 <span class="mi">85</span>     <span class="k">typedef</span> <span class="n">DefaultIEW</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">IEW</span><span class="p">;</span>
 <span class="mi">86</span>     <span class="cm">/** Typedef for commit. */</span>
 <span class="mi">87</span>     <span class="k">typedef</span> <span class="n">DefaultCommit</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">Commit</span><span class="p">;</span>
 <span class="mi">88</span> 
 <span class="mi">89</span>     <span class="cm">/** The struct for communication between fetch and decode. */</span>
 <span class="mi">90</span>     <span class="k">typedef</span> <span class="n">DefaultFetchDefaultDecode</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">FetchStruct</span><span class="p">;</span>
 <span class="mi">91</span> 
 <span class="mi">92</span>     <span class="cm">/** The struct for communication between decode and rename. */</span>
 <span class="mi">93</span>     <span class="k">typedef</span> <span class="n">DefaultDecodeDefaultRename</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">DecodeStruct</span><span class="p">;</span>
 <span class="mi">94</span> 
 <span class="mi">95</span>     <span class="cm">/** The struct for communication between rename and IEW. */</span>
 <span class="mi">96</span>     <span class="k">typedef</span> <span class="n">DefaultRenameDefaultIEW</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">RenameStruct</span><span class="p">;</span>
 <span class="mi">97</span> 
 <span class="mi">98</span>     <span class="cm">/** The struct for communication between IEW and commit. */</span>
 <span class="mi">99</span>     <span class="k">typedef</span> <span class="n">DefaultIEWDefaultCommit</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">IEWStruct</span><span class="p">;</span>
<span class="mi">100</span> 
<span class="mi">101</span>     <span class="cm">/** The struct for communication within the IEW stage. */</span>
<span class="mi">102</span>     <span class="k">typedef</span> <span class="o">::</span><span class="n">IssueStruct</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">IssueStruct</span><span class="p">;</span>
<span class="mi">103</span> 
<span class="mi">104</span>     <span class="cm">/** The struct for all backwards communication. */</span>
<span class="mi">105</span>     <span class="k">typedef</span> <span class="n">TimeBufStruct</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;</span> <span class="n">TimeStruct</span><span class="p">;</span>
<span class="mi">106</span> 
<span class="mi">107</span> <span class="p">};</span>
</pre></td></tr></tbody></table></code></div></div>

<p>In the above code, I can find that each stage is defined as an instantiation 
of one class template. For example, Fetch type is defined as an DefaultFetch<Impl>
and Decode type is defined as an DefaultDecode<Impl>. Remember that 
we are currently looking at this class because of the instantiation, SimpleCPUPolicy<O3CPUImpl>.
Therefore, DefaultDecode<Impl> can be translated into DefaultDecode<O3CPUImpl>.
In the FullO3CPU, instead of implementing entire pipeline in one class, 
it embeds different classes' instances implementing each part of the O3CPU's pipeline. 
Therefore, to understand the fetch part of the O3CPU, we should take a look at the DefaultFetch class.</O3CPUImpl></Impl></O3CPUImpl></Impl></Impl></p>

<h2 id="fetch-of-the-o3cpu"><span class="me-2">Fetch of the O3CPU</span><a href="#fetch-of-the-o3cpu" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h2 id="tick"><span class="me-2">Tick</span><a href="#tick" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<div class="language-cpp highlighter-rouge"><div class="code-header">
        <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
</pre></td><td class="rouge-code"><pre> <span class="mi">529</span> <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">Impl</span><span class="p">&gt;</span>
 <span class="mi">530</span> <span class="kt">void</span>
 <span class="mi">531</span> <span class="n">FullO3CPU</span><span class="o">&lt;</span><span class="n">Impl</span><span class="o">&gt;::</span><span class="n">tick</span><span class="p">()</span>
 <span class="mi">532</span> <span class="p">{</span>
 <span class="mi">533</span>     <span class="n">DPRINTF</span><span class="p">(</span><span class="n">O3CPU</span><span class="p">,</span> <span class="s">"</span><span class="se">\n\n</span><span class="s">FullO3CPU: Ticking main, FullO3CPU.</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
 <span class="mi">534</span>     <span class="n">assert</span><span class="p">(</span><span class="o">!</span><span class="n">switchedOut</span><span class="p">());</span>
 <span class="mi">535</span>     <span class="n">assert</span><span class="p">(</span><span class="n">drainState</span><span class="p">()</span> <span class="o">!=</span> <span class="n">DrainState</span><span class="o">::</span><span class="n">Drained</span><span class="p">);</span>
 <span class="mi">536</span> 
 <span class="mi">537</span>     <span class="o">++</span><span class="n">numCycles</span><span class="p">;</span>
 <span class="mi">538</span>     <span class="n">updateCycleCounters</span><span class="p">(</span><span class="n">BaseCPU</span><span class="o">::</span><span class="n">CPU_STATE_ON</span><span class="p">);</span>
 <span class="mi">539</span> 
 <span class="mi">540</span> <span class="c1">//    activity = false;</span>
 <span class="mi">541</span> 
 <span class="mi">542</span>     <span class="c1">//Tick each of the stages</span>
 <span class="mi">543</span>     <span class="n">fetch</span><span class="p">.</span><span class="n">tick</span><span class="p">();</span>
 <span class="mi">544</span> 
 <span class="mi">545</span>     <span class="n">decode</span><span class="p">.</span><span class="n">tick</span><span class="p">();</span>
 <span class="mi">546</span> 
 <span class="mi">547</span>     <span class="n">rename</span><span class="p">.</span><span class="n">tick</span><span class="p">();</span>
 <span class="mi">548</span> 
 <span class="mi">549</span>     <span class="n">iew</span><span class="p">.</span><span class="n">tick</span><span class="p">();</span>
 <span class="mi">550</span> 
 <span class="mi">551</span>     <span class="n">commit</span><span class="p">.</span><span class="n">tick</span><span class="p">();</span>
 <span class="mi">552</span> 
 <span class="mi">553</span>     <span class="c1">// Now advance the time buffers</span>
 <span class="mi">554</span>     <span class="n">timeBuffer</span><span class="p">.</span><span class="n">advance</span><span class="p">();</span>
 <span class="mi">555</span> 
 <span class="mi">556</span>     <span class="n">fetchQueue</span><span class="p">.</span><span class="n">advance</span><span class="p">();</span>
 <span class="mi">557</span>     <span class="n">decodeQueue</span><span class="p">.</span><span class="n">advance</span><span class="p">();</span>
 <span class="mi">558</span>     <span class="n">renameQueue</span><span class="p">.</span><span class="n">advance</span><span class="p">();</span>
 <span class="mi">559</span>     <span class="n">iewQueue</span><span class="p">.</span><span class="n">advance</span><span class="p">();</span>
 <span class="mi">560</span> 
 <span class="mi">561</span>     <span class="n">activityRec</span><span class="p">.</span><span class="n">advance</span><span class="p">();</span>
 <span class="mi">562</span> 
 <span class="mi">563</span>     <span class="k">if</span> <span class="p">(</span><span class="n">removeInstsThisCycle</span><span class="p">)</span> <span class="p">{</span>
 <span class="mi">564</span>         <span class="n">cleanUpRemovedInsts</span><span class="p">();</span>
 <span class="mi">565</span>     <span class="p">}</span>
 <span class="mi">566</span> 
 <span class="mi">567</span>     <span class="nf">if</span> <span class="p">(</span><span class="o">!</span><span class="n">tickEvent</span><span class="p">.</span><span class="n">scheduled</span><span class="p">())</span> <span class="p">{</span>
 <span class="mi">568</span>         <span class="k">if</span> <span class="p">(</span><span class="n">_status</span> <span class="o">==</span> <span class="n">SwitchedOut</span><span class="p">)</span> <span class="p">{</span>
 <span class="mi">569</span>             <span class="n">DPRINTF</span><span class="p">(</span><span class="n">O3CPU</span><span class="p">,</span> <span class="s">"Switched out!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
 <span class="mi">570</span>             <span class="c1">// increment stat</span>
 <span class="mi">571</span>             <span class="n">lastRunningCycle</span> <span class="o">=</span> <span class="n">curCycle</span><span class="p">();</span>
 <span class="mi">572</span>         <span class="p">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="o">!</span><span class="n">activityRec</span><span class="p">.</span><span class="n">active</span><span class="p">()</span> <span class="o">||</span> <span class="n">_status</span> <span class="o">==</span> <span class="n">Idle</span><span class="p">)</span> <span class="p">{</span>
 <span class="mi">573</span>             <span class="n">DPRINTF</span><span class="p">(</span><span class="n">O3CPU</span><span class="p">,</span> <span class="s">"Idle!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
 <span class="mi">574</span>             <span class="n">lastRunningCycle</span> <span class="o">=</span> <span class="n">curCycle</span><span class="p">();</span>
 <span class="mi">575</span>             <span class="n">timesIdled</span><span class="o">++</span><span class="p">;</span>
 <span class="mi">576</span>         <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
 <span class="mi">577</span>             <span class="n">schedule</span><span class="p">(</span><span class="n">tickEvent</span><span class="p">,</span> <span class="n">clockEdge</span><span class="p">(</span><span class="n">Cycles</span><span class="p">(</span><span class="mi">1</span><span class="p">)));</span>
 <span class="mi">578</span>             <span class="n">DPRINTF</span><span class="p">(</span><span class="n">O3CPU</span><span class="p">,</span> <span class="s">"Scheduling next tick!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
 <span class="mi">579</span>         <span class="p">}</span>
 <span class="mi">580</span>     <span class="p">}</span>
 <span class="mi">581</span> 
 <span class="mi">582</span>     <span class="nf">if</span> <span class="p">(</span><span class="o">!</span><span class="n">FullSystem</span><span class="p">)</span>
 <span class="mi">583</span>         <span class="n">updateThreadPriority</span><span class="p">();</span>
 <span class="mi">584</span> 
 <span class="mi">585</span>     <span class="nf">tryDrain</span><span class="p">();</span>
 <span class="mi">586</span> <span class="p">}</span>

</pre></td></tr></tbody></table></code></div></div>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/gem5/">GEM5</a>,
          <a href="/categories/o3/">O3</a>
      </div>
    

    <!-- tags -->
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a
        href="https://twitter.com/intent/tweet?text=O3%20Cpu%20Gem5%20-%20Ruach&url=http%3A%2F%2Flocalhost%3A4000%2Fposts%2FO3-CPU-GEM5%2F"
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Twitter"
        target="_blank"
        rel="noopener"
        aria-label="Twitter"
      >
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a
        href="https://www.facebook.com/sharer/sharer.php?title=O3%20Cpu%20Gem5%20-%20Ruach&u=http%3A%2F%2Flocalhost%3A4000%2Fposts%2FO3-CPU-GEM5%2F"
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Facebook"
        target="_blank"
        rel="noopener"
        aria-label="Facebook"
      >
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a
        href="https://t.me/share/url?url=http%3A%2F%2Flocalhost%3A4000%2Fposts%2FO3-CPU-GEM5%2F&text=O3%20Cpu%20Gem5%20-%20Ruach"
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Telegram"
        target="_blank"
        rel="noopener"
        aria-label="Telegram"
      >
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

      

      <a
        href="https://www.linkedin.com/sharing/share-offsite/?url=http%3A%2F%2Flocalhost%3A4000%2Fposts%2FO3-CPU-GEM5%2F"
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Linkedin"
        target="_blank"
        rel="noopener"
        aria-label="Linkedin"
      >
        <i class="fa-fw fab fa-linkedin"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get the last 5 posts from lastmod list. -->















              <!-- The trending tags list -->


















            </div>

            
              
              



  <section id="toc-wrapper" class="ps-0 pe-4">
    <h2 class="panel-heading ps-3 pt-2 mb-2">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->














  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
  

  

  

  

  

  

  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/O3-CPU-Fetch/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1622088000"
  data-df="ll"
  
>
  May 27, 2021
</time>

              <h4 class="pt-0 my-2">O3 Cpu Fetch</h4>
              <div class="text-muted">
                <p>
                  





                  Fetch
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/O3-CPU-Decode/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1622174400"
  data-df="ll"
  
>
  May 28, 2021
</time>

              <h4 class="pt-0 my-2">O3 Cpu Decode</h4>
              <div class="text-muted">
                <p>
                  





                  Sending fetched instructions to decode stage
gem5/src/cpu/o3/fetch_impl.hh
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
 961 
 962     // Pick a r...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/O3-CPU-rename/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1622260800"
  data-df="ll"
  
>
  May 29, 2021
</time>

              <h4 class="pt-0 my-2">O3 Cpu Rename</h4>
              <div class="text-muted">
                <p>
                  





                  Rename
It maintains the rename history of all instructions 
with destination registers, storing the arch register, 
the new physical register, and the old physical register.
The information is requ...
                </p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/usb-device-add/"
      class="btn btn-outline-primary"
      aria-label="Older"
    >
      <p>Usb Device Add</p>
    </a>
  

  
    <a
      href="/posts/O3-CPU-Fetch/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>O3 Cpu Fetch</p>
    </a>
  
</nav>

            
              
              <!--  The comments switcher -->

  
  <!-- https://giscus.app/ -->
<script type="text/javascript">
  (function () {
    const origin = 'https://giscus.app';
    const iframe = 'iframe.giscus-frame';
    const lightTheme = 'light';
    const darkTheme = 'dark_dimmed';

    let initTheme = lightTheme;
    const html = document.documentElement;

    if (
      (html.hasAttribute('data-mode') &&
        html.getAttribute('data-mode') === 'dark') ||
      (!html.hasAttribute('data-mode') &&
        window.matchMedia('(prefers-color-scheme: dark)').matches)
    ) {
      initTheme = darkTheme;
    }

    let giscusAttributes = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'Ruach/ruach.github.io',
      'data-repo-id': '',
      'data-category': '',
      'data-category-id': '',
      'data-mapping': 'pathname',
      'data-reactions-enabled': '1',
      'data-emit-metadata': '0',
      'data-theme': initTheme,
      'data-input-position': 'bottom',
      'data-lang': 'en',
      'data-loading': 'lazy',
      crossorigin: 'anonymous',
      async: ''
    };

    let giscusScript = document.createElement('script');
    Object.entries(giscusAttributes).forEach(([key, value]) =>
      giscusScript.setAttribute(key, value)
    );
    document.getElementById('tail-wrapper').appendChild(giscusScript);

    addEventListener('message', (event) => {
      if (
        event.source === window &&
        event.data &&
        event.data.direction === ModeToggle.ID
      ) {
        /* global theme mode changed */
        const mode = event.data.message;
        const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme;

        const message = {
          setConfig: {
            theme: theme
          }
        };

        const giscus = document.querySelector(iframe).contentWindow;
        giscus.postMessage({ giscus: message }, origin);
      }
    });
  })();
</script>



            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>
    ©
    <time>2023</time>
    <a href="https://ruach.github.io">Jaehyuk Lee</a>.
    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->


















    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->

    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/en.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.21.2/dist/tocbot.min.js"></script>






<script defer src="/assets/js/dist/post.min.js"></script>






    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  /* Note: dependent library will be loaded in `js-selector.html` */
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5"></p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>

  </body>
</html>

