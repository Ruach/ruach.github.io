<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en" data-mode="light">
  <!-- The Head -->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  >

  

  

  
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Basecpu" />
<meta property="og:locale" content="en" />
<meta name="description" content="gem5/src/cpu/BaseCPU.py 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 65 if buildEnv[&#39;TARGET_ISA&#39;] == &#39;alpha&#39;: 66 from m5.objects.AlphaTLB import AlphaDTB as ArchDTB, AlphaITB as ArchITB 67 from m5.objects.AlphaInterrupts import AlphaInterrupts as ArchInterrupts 68 from m5.objects.AlphaISA import AlphaISA as ArchISA 69 ArchISAsParam = VectorParam.AlphaISA 70 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;sparc&#39;: 71 from m5.objects.SparcTLB import SparcTLB as ArchDTB, SparcTLB as ArchITB 72 from m5.objects.SparcInterrupts import SparcInterrupts as ArchInterrupts 73 from m5.objects.SparcISA import SparcISA as ArchISA 74 ArchISAsParam = VectorParam.SparcISA 75 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;x86&#39;: 76 from m5.objects.X86TLB import X86TLB as ArchDTB, X86TLB as ArchITB 77 from m5.objects.X86LocalApic import X86LocalApic as ArchInterrupts 78 from m5.objects.X86ISA import X86ISA as ArchISA 79 ArchISAsParam = VectorParam.X86ISA 80 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;mips&#39;: 81 from m5.objects.MipsTLB import MipsTLB as ArchDTB, MipsTLB as ArchITB 82 from m5.objects.MipsInterrupts import MipsInterrupts as ArchInterrupts 83 from m5.objects.MipsISA import MipsISA as ArchISA 84 ArchISAsParam = VectorParam.MipsISA 85 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;arm&#39;: 86 from m5.objects.ArmTLB import ArmDTB as ArchDTB, ArmITB as ArchITB 87 from m5.objects.ArmInterrupts import ArmInterrupts as ArchInterrupts 88 from m5.objects.ArmISA import ArmISA as ArchISA 89 ArchISAsParam = VectorParam.ArmISA 90 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;power&#39;: 91 from m5.objects.PowerTLB import PowerTLB as ArchDTB, PowerTLB as ArchITB 92 from m5.objects.PowerInterrupts import PowerInterrupts as ArchInterrupts 93 from m5.objects.PowerISA import PowerISA as ArchISA 94 ArchISAsParam = VectorParam.PowerISA 95 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;riscv&#39;: 96 from m5.objects.RiscvTLB import RiscvTLB as ArchDTB, RiscvTLB as ArchITB 97 from m5.objects.RiscvInterrupts import RiscvInterrupts as ArchInterrupts 98 from m5.objects.RiscvISA import RiscvISA as ArchISA 99 ArchISAsParam = VectorParam.RiscvISA 100 else: 101 print(&quot;Don&#39;t know what object types to use for ISA %s&quot; % 102 buildEnv[&#39;TARGET_ISA&#39;]) 103 sys.exit(1) 104" />
<meta property="og:description" content="gem5/src/cpu/BaseCPU.py 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 65 if buildEnv[&#39;TARGET_ISA&#39;] == &#39;alpha&#39;: 66 from m5.objects.AlphaTLB import AlphaDTB as ArchDTB, AlphaITB as ArchITB 67 from m5.objects.AlphaInterrupts import AlphaInterrupts as ArchInterrupts 68 from m5.objects.AlphaISA import AlphaISA as ArchISA 69 ArchISAsParam = VectorParam.AlphaISA 70 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;sparc&#39;: 71 from m5.objects.SparcTLB import SparcTLB as ArchDTB, SparcTLB as ArchITB 72 from m5.objects.SparcInterrupts import SparcInterrupts as ArchInterrupts 73 from m5.objects.SparcISA import SparcISA as ArchISA 74 ArchISAsParam = VectorParam.SparcISA 75 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;x86&#39;: 76 from m5.objects.X86TLB import X86TLB as ArchDTB, X86TLB as ArchITB 77 from m5.objects.X86LocalApic import X86LocalApic as ArchInterrupts 78 from m5.objects.X86ISA import X86ISA as ArchISA 79 ArchISAsParam = VectorParam.X86ISA 80 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;mips&#39;: 81 from m5.objects.MipsTLB import MipsTLB as ArchDTB, MipsTLB as ArchITB 82 from m5.objects.MipsInterrupts import MipsInterrupts as ArchInterrupts 83 from m5.objects.MipsISA import MipsISA as ArchISA 84 ArchISAsParam = VectorParam.MipsISA 85 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;arm&#39;: 86 from m5.objects.ArmTLB import ArmDTB as ArchDTB, ArmITB as ArchITB 87 from m5.objects.ArmInterrupts import ArmInterrupts as ArchInterrupts 88 from m5.objects.ArmISA import ArmISA as ArchISA 89 ArchISAsParam = VectorParam.ArmISA 90 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;power&#39;: 91 from m5.objects.PowerTLB import PowerTLB as ArchDTB, PowerTLB as ArchITB 92 from m5.objects.PowerInterrupts import PowerInterrupts as ArchInterrupts 93 from m5.objects.PowerISA import PowerISA as ArchISA 94 ArchISAsParam = VectorParam.PowerISA 95 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;riscv&#39;: 96 from m5.objects.RiscvTLB import RiscvTLB as ArchDTB, RiscvTLB as ArchITB 97 from m5.objects.RiscvInterrupts import RiscvInterrupts as ArchInterrupts 98 from m5.objects.RiscvISA import RiscvISA as ArchISA 99 ArchISAsParam = VectorParam.RiscvISA 100 else: 101 print(&quot;Don&#39;t know what object types to use for ISA %s&quot; % 102 buildEnv[&#39;TARGET_ISA&#39;]) 103 sys.exit(1) 104" />
<link rel="canonical" href="https://ruach.github.io/posts/basecpu/" />
<meta property="og:url" content="https://ruach.github.io/posts/basecpu/" />
<meta property="og:site_name" content="Ruach" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-08-08T00:00:00-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Basecpu" />
<meta name="twitter:site" content="@ruach_lee" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-08-08T00:00:00-04:00","datePublished":"2021-08-08T00:00:00-04:00","description":"gem5/src/cpu/BaseCPU.py 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 65 if buildEnv[&#39;TARGET_ISA&#39;] == &#39;alpha&#39;: 66 from m5.objects.AlphaTLB import AlphaDTB as ArchDTB, AlphaITB as ArchITB 67 from m5.objects.AlphaInterrupts import AlphaInterrupts as ArchInterrupts 68 from m5.objects.AlphaISA import AlphaISA as ArchISA 69 ArchISAsParam = VectorParam.AlphaISA 70 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;sparc&#39;: 71 from m5.objects.SparcTLB import SparcTLB as ArchDTB, SparcTLB as ArchITB 72 from m5.objects.SparcInterrupts import SparcInterrupts as ArchInterrupts 73 from m5.objects.SparcISA import SparcISA as ArchISA 74 ArchISAsParam = VectorParam.SparcISA 75 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;x86&#39;: 76 from m5.objects.X86TLB import X86TLB as ArchDTB, X86TLB as ArchITB 77 from m5.objects.X86LocalApic import X86LocalApic as ArchInterrupts 78 from m5.objects.X86ISA import X86ISA as ArchISA 79 ArchISAsParam = VectorParam.X86ISA 80 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;mips&#39;: 81 from m5.objects.MipsTLB import MipsTLB as ArchDTB, MipsTLB as ArchITB 82 from m5.objects.MipsInterrupts import MipsInterrupts as ArchInterrupts 83 from m5.objects.MipsISA import MipsISA as ArchISA 84 ArchISAsParam = VectorParam.MipsISA 85 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;arm&#39;: 86 from m5.objects.ArmTLB import ArmDTB as ArchDTB, ArmITB as ArchITB 87 from m5.objects.ArmInterrupts import ArmInterrupts as ArchInterrupts 88 from m5.objects.ArmISA import ArmISA as ArchISA 89 ArchISAsParam = VectorParam.ArmISA 90 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;power&#39;: 91 from m5.objects.PowerTLB import PowerTLB as ArchDTB, PowerTLB as ArchITB 92 from m5.objects.PowerInterrupts import PowerInterrupts as ArchInterrupts 93 from m5.objects.PowerISA import PowerISA as ArchISA 94 ArchISAsParam = VectorParam.PowerISA 95 elif buildEnv[&#39;TARGET_ISA&#39;] == &#39;riscv&#39;: 96 from m5.objects.RiscvTLB import RiscvTLB as ArchDTB, RiscvTLB as ArchITB 97 from m5.objects.RiscvInterrupts import RiscvInterrupts as ArchInterrupts 98 from m5.objects.RiscvISA import RiscvISA as ArchISA 99 ArchISAsParam = VectorParam.RiscvISA 100 else: 101 print(&quot;Don&#39;t know what object types to use for ISA %s&quot; % 102 buildEnv[&#39;TARGET_ISA&#39;]) 103 sys.exit(1) 104","headline":"Basecpu","mainEntityOfPage":{"@type":"WebPage","@id":"https://ruach.github.io/posts/basecpu/"},"url":"https://ruach.github.io/posts/basecpu/"}</script>
<!-- End Jekyll SEO tag -->

  

  <title>Basecpu | Ruach
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">
<link rel="manifest" href="/assets/img/favicons/site.webmanifest">
<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Ruach">
<meta name="application-name" content="Ruach">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin>
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
    

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">
  

  <!-- GA -->
  

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css">

  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.2/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Manific Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css">
  

  <!-- JavaScript -->

  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle">
      
        
        <img src="/assets/img/jaehyuk.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'">
      
    </a>

    <h1 class="site-title">
      <a href="/">Ruach</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">Security Researcher at Gatech</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    

    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['jaehyuk','gatech.edu'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="https://www.linkedin.com/in/jaehyuk-lee-29b33b121/"
          aria-label="linkedin"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-linkedin"></i>
        </a>
      
    
      

      
        <a
          href="https://github.com/Ruach"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://stackoverflow.com/users/4460514/ruach?tab=profile"
          aria-label="stack-overflow"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-stack-overflow"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">
                Home
              </a>
            </span>

          
        
          
        
          
            
              <span>Basecpu</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->





<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>Basecpu</h1>

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1628395200"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Aug  8, 2021
</time>

      </span>

      <!-- lastmod date -->
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              <a href="https://ruach.github.io">Jaehyuk Lee</a>
            
          </em>
        </span>

        <!-- read time -->
        <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="1115 words"
>
  <em>6 min</em> read</span>

      </div>
      <!-- .d-flex -->
    </div>
    <!-- .post-meta -->
  </header>

  <div class="content">
    <p><em>gem5/src/cpu/BaseCPU.py</em></p>
<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre></td><td class="rouge-code"><pre> <span class="mi">65</span> <span class="k">if</span> <span class="n">buildEnv</span><span class="p">[</span><span class="sh">'</span><span class="s">TARGET_ISA</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">alpha</span><span class="sh">'</span><span class="p">:</span>
 <span class="mi">66</span>     <span class="kn">from</span> <span class="n">m5.objects.AlphaTLB</span> <span class="kn">import</span> <span class="n">AlphaDTB</span> <span class="k">as</span> <span class="n">ArchDTB</span><span class="p">,</span> <span class="n">AlphaITB</span> <span class="k">as</span> <span class="n">ArchITB</span>
 <span class="mi">67</span>     <span class="kn">from</span> <span class="n">m5.objects.AlphaInterrupts</span> <span class="kn">import</span> <span class="n">AlphaInterrupts</span> <span class="k">as</span> <span class="n">ArchInterrupts</span>
 <span class="mi">68</span>     <span class="kn">from</span> <span class="n">m5.objects.AlphaISA</span> <span class="kn">import</span> <span class="n">AlphaISA</span> <span class="k">as</span> <span class="n">ArchISA</span>
 <span class="mi">69</span>     <span class="n">ArchISAsParam</span> <span class="o">=</span> <span class="n">VectorParam</span><span class="p">.</span><span class="n">AlphaISA</span>
 <span class="mi">70</span> <span class="k">elif</span> <span class="n">buildEnv</span><span class="p">[</span><span class="sh">'</span><span class="s">TARGET_ISA</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">sparc</span><span class="sh">'</span><span class="p">:</span>
 <span class="mi">71</span>     <span class="kn">from</span> <span class="n">m5.objects.SparcTLB</span> <span class="kn">import</span> <span class="n">SparcTLB</span> <span class="k">as</span> <span class="n">ArchDTB</span><span class="p">,</span> <span class="n">SparcTLB</span> <span class="k">as</span> <span class="n">ArchITB</span>
 <span class="mi">72</span>     <span class="kn">from</span> <span class="n">m5.objects.SparcInterrupts</span> <span class="kn">import</span> <span class="n">SparcInterrupts</span> <span class="k">as</span> <span class="n">ArchInterrupts</span>
 <span class="mi">73</span>     <span class="kn">from</span> <span class="n">m5.objects.SparcISA</span> <span class="kn">import</span> <span class="n">SparcISA</span> <span class="k">as</span> <span class="n">ArchISA</span>
 <span class="mi">74</span>     <span class="n">ArchISAsParam</span> <span class="o">=</span> <span class="n">VectorParam</span><span class="p">.</span><span class="n">SparcISA</span>
 <span class="mi">75</span> <span class="k">elif</span> <span class="n">buildEnv</span><span class="p">[</span><span class="sh">'</span><span class="s">TARGET_ISA</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">x86</span><span class="sh">'</span><span class="p">:</span>
 <span class="mi">76</span>     <span class="kn">from</span> <span class="n">m5.objects.X86TLB</span> <span class="kn">import</span> <span class="n">X86TLB</span> <span class="k">as</span> <span class="n">ArchDTB</span><span class="p">,</span> <span class="n">X86TLB</span> <span class="k">as</span> <span class="n">ArchITB</span>
 <span class="mi">77</span>     <span class="kn">from</span> <span class="n">m5.objects.X86LocalApic</span> <span class="kn">import</span> <span class="n">X86LocalApic</span> <span class="k">as</span> <span class="n">ArchInterrupts</span>
 <span class="mi">78</span>     <span class="kn">from</span> <span class="n">m5.objects.X86ISA</span> <span class="kn">import</span> <span class="n">X86ISA</span> <span class="k">as</span> <span class="n">ArchISA</span>
 <span class="mi">79</span>     <span class="n">ArchISAsParam</span> <span class="o">=</span> <span class="n">VectorParam</span><span class="p">.</span><span class="n">X86ISA</span>
 <span class="mi">80</span> <span class="k">elif</span> <span class="n">buildEnv</span><span class="p">[</span><span class="sh">'</span><span class="s">TARGET_ISA</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">mips</span><span class="sh">'</span><span class="p">:</span>
 <span class="mi">81</span>     <span class="kn">from</span> <span class="n">m5.objects.MipsTLB</span> <span class="kn">import</span> <span class="n">MipsTLB</span> <span class="k">as</span> <span class="n">ArchDTB</span><span class="p">,</span> <span class="n">MipsTLB</span> <span class="k">as</span> <span class="n">ArchITB</span>
 <span class="mi">82</span>     <span class="kn">from</span> <span class="n">m5.objects.MipsInterrupts</span> <span class="kn">import</span> <span class="n">MipsInterrupts</span> <span class="k">as</span> <span class="n">ArchInterrupts</span>
 <span class="mi">83</span>     <span class="kn">from</span> <span class="n">m5.objects.MipsISA</span> <span class="kn">import</span> <span class="n">MipsISA</span> <span class="k">as</span> <span class="n">ArchISA</span>
 <span class="mi">84</span>     <span class="n">ArchISAsParam</span> <span class="o">=</span> <span class="n">VectorParam</span><span class="p">.</span><span class="n">MipsISA</span>
 <span class="mi">85</span> <span class="k">elif</span> <span class="n">buildEnv</span><span class="p">[</span><span class="sh">'</span><span class="s">TARGET_ISA</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">arm</span><span class="sh">'</span><span class="p">:</span>
 <span class="mi">86</span>     <span class="kn">from</span> <span class="n">m5.objects.ArmTLB</span> <span class="kn">import</span> <span class="n">ArmDTB</span> <span class="k">as</span> <span class="n">ArchDTB</span><span class="p">,</span> <span class="n">ArmITB</span> <span class="k">as</span> <span class="n">ArchITB</span>
 <span class="mi">87</span>     <span class="kn">from</span> <span class="n">m5.objects.ArmInterrupts</span> <span class="kn">import</span> <span class="n">ArmInterrupts</span> <span class="k">as</span> <span class="n">ArchInterrupts</span>
 <span class="mi">88</span>     <span class="kn">from</span> <span class="n">m5.objects.ArmISA</span> <span class="kn">import</span> <span class="n">ArmISA</span> <span class="k">as</span> <span class="n">ArchISA</span>
 <span class="mi">89</span>     <span class="n">ArchISAsParam</span> <span class="o">=</span> <span class="n">VectorParam</span><span class="p">.</span><span class="n">ArmISA</span>
 <span class="mi">90</span> <span class="k">elif</span> <span class="n">buildEnv</span><span class="p">[</span><span class="sh">'</span><span class="s">TARGET_ISA</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">power</span><span class="sh">'</span><span class="p">:</span>
 <span class="mi">91</span>     <span class="kn">from</span> <span class="n">m5.objects.PowerTLB</span> <span class="kn">import</span> <span class="n">PowerTLB</span> <span class="k">as</span> <span class="n">ArchDTB</span><span class="p">,</span> <span class="n">PowerTLB</span> <span class="k">as</span> <span class="n">ArchITB</span>
 <span class="mi">92</span>     <span class="kn">from</span> <span class="n">m5.objects.PowerInterrupts</span> <span class="kn">import</span> <span class="n">PowerInterrupts</span> <span class="k">as</span> <span class="n">ArchInterrupts</span>
 <span class="mi">93</span>     <span class="kn">from</span> <span class="n">m5.objects.PowerISA</span> <span class="kn">import</span> <span class="n">PowerISA</span> <span class="k">as</span> <span class="n">ArchISA</span>
 <span class="mi">94</span>     <span class="n">ArchISAsParam</span> <span class="o">=</span> <span class="n">VectorParam</span><span class="p">.</span><span class="n">PowerISA</span>
 <span class="mi">95</span> <span class="k">elif</span> <span class="n">buildEnv</span><span class="p">[</span><span class="sh">'</span><span class="s">TARGET_ISA</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">riscv</span><span class="sh">'</span><span class="p">:</span>
 <span class="mi">96</span>     <span class="kn">from</span> <span class="n">m5.objects.RiscvTLB</span> <span class="kn">import</span> <span class="n">RiscvTLB</span> <span class="k">as</span> <span class="n">ArchDTB</span><span class="p">,</span> <span class="n">RiscvTLB</span> <span class="k">as</span> <span class="n">ArchITB</span>
 <span class="mi">97</span>     <span class="kn">from</span> <span class="n">m5.objects.RiscvInterrupts</span> <span class="kn">import</span> <span class="n">RiscvInterrupts</span> <span class="k">as</span> <span class="n">ArchInterrupts</span>
 <span class="mi">98</span>     <span class="kn">from</span> <span class="n">m5.objects.RiscvISA</span> <span class="kn">import</span> <span class="n">RiscvISA</span> <span class="k">as</span> <span class="n">ArchISA</span>
 <span class="mi">99</span>     <span class="n">ArchISAsParam</span> <span class="o">=</span> <span class="n">VectorParam</span><span class="p">.</span><span class="n">RiscvISA</span>
<span class="mi">100</span> <span class="k">else</span><span class="p">:</span>
<span class="mi">101</span>     <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Don</span><span class="sh">'</span><span class="s">t know what object types to use for ISA %s</span><span class="sh">"</span> <span class="o">%</span>
<span class="mi">102</span>             <span class="n">buildEnv</span><span class="p">[</span><span class="sh">'</span><span class="s">TARGET_ISA</span><span class="sh">'</span><span class="p">])</span>
<span class="mi">103</span>     <span class="n">sys</span><span class="p">.</span><span class="nf">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="mi">104</span> 
</pre></td></tr></tbody></table></code></div></div>

<p><em>gem5/src/cpu/BaseCPU.py</em></p>
<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td><td class="rouge-code"><pre><span class="mi">105</span> <span class="k">class</span> <span class="nc">BaseCPU</span><span class="p">(</span><span class="n">ClockedObject</span><span class="p">):</span>
<span class="mi">106</span>     <span class="nb">type</span> <span class="o">=</span> <span class="sh">'</span><span class="s">BaseCPU</span><span class="sh">'</span>
<span class="mi">107</span>     <span class="n">abstract</span> <span class="o">=</span> <span class="bp">True</span>
<span class="mi">108</span>     <span class="n">cxx_header</span> <span class="o">=</span> <span class="sh">"</span><span class="s">cpu/base.hh</span><span class="sh">"</span>
<span class="p">...</span><span class="bp">...</span>
<span class="mi">143</span>     <span class="n">system</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">System</span><span class="p">(</span><span class="n">Parent</span><span class="p">.</span><span class="nb">any</span><span class="p">,</span> <span class="sh">"</span><span class="s">system object</span><span class="sh">"</span><span class="p">)</span>
<span class="mi">144</span>     <span class="n">cpu_id</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Int</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="sh">"</span><span class="s">CPU identifier</span><span class="sh">"</span><span class="p">)</span>
<span class="mi">145</span>     <span class="n">socket_id</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Unsigned</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="sh">"</span><span class="s">Physical Socket identifier</span><span class="sh">"</span><span class="p">)</span>
<span class="mi">146</span>     <span class="n">numThreads</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Unsigned</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="sh">"</span><span class="s">number of HW thread contexts</span><span class="sh">"</span><span class="p">)</span>
<span class="mi">147</span>     <span class="n">pwr_gating_latency</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Cycles</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span>
<span class="mi">148</span>         <span class="sh">"</span><span class="s">Latency to enter power gating state when all contexts are suspended</span><span class="sh">"</span><span class="p">)</span>
<span class="mi">149</span> 
<span class="mi">150</span>     <span class="n">power_gating_on_idle</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Bool</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="sh">"</span><span class="s">Control whether the core goes </span><span class="sh">"</span>\
<span class="mi">151</span>         <span class="sh">"</span><span class="s">to the OFF power state after all thread are disabled for </span><span class="sh">"</span>\
<span class="mi">152</span>         <span class="sh">"</span><span class="s">pwr_gating_latency cycles</span><span class="sh">"</span><span class="p">)</span>
<span class="mi">153</span> 
<span class="mi">154</span>     <span class="n">function_trace</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Bool</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="sh">"</span><span class="s">Enable function trace</span><span class="sh">"</span><span class="p">)</span>
<span class="mi">155</span>     <span class="n">function_trace_start</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Tick</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="sh">"</span><span class="s">Tick to start function trace</span><span class="sh">"</span><span class="p">)</span>
<span class="mi">156</span> 
<span class="mi">157</span>     <span class="n">checker</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">BaseCPU</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="sh">"</span><span class="s">checker CPU</span><span class="sh">"</span><span class="p">)</span>
<span class="mi">158</span> 
<span class="mi">159</span>     <span class="n">syscallRetryLatency</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Cycles</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span> <span class="sh">"</span><span class="s">Cycles to wait until retry</span><span class="sh">"</span><span class="p">)</span>
<span class="mi">160</span> 
<span class="mi">161</span>     <span class="n">do_checkpoint_insts</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Bool</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span>
<span class="mi">162</span>         <span class="sh">"</span><span class="s">enable checkpoint pseudo instructions</span><span class="sh">"</span><span class="p">)</span>
<span class="mi">163</span>     <span class="n">do_statistics_insts</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Bool</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span>
<span class="mi">164</span>         <span class="sh">"</span><span class="s">enable statistics pseudo instructions</span><span class="sh">"</span><span class="p">)</span>
<span class="mi">165</span> 
<span class="mi">166</span>     <span class="n">profile</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Latency</span><span class="p">(</span><span class="sh">'</span><span class="s">0ns</span><span class="sh">'</span><span class="p">,</span> <span class="sh">"</span><span class="s">trace the kernel stack</span><span class="sh">"</span><span class="p">)</span>
<span class="mi">167</span>     <span class="n">do_quiesce</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Bool</span><span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="sh">"</span><span class="s">enable quiesce instructions</span><span class="sh">"</span><span class="p">)</span>
<span class="mi">168</span> 
<span class="mi">169</span>     <span class="n">wait_for_remote_gdb</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Bool</span><span class="p">(</span><span class="bp">False</span><span class="p">,</span>
<span class="mi">170</span>         <span class="sh">"</span><span class="s">Wait for a remote GDB connection</span><span class="sh">"</span><span class="p">);</span>
<span class="mi">171</span> 
<span class="mi">172</span>     <span class="n">workload</span> <span class="o">=</span> <span class="n">VectorParam</span><span class="p">.</span><span class="nc">Process</span><span class="p">([],</span> <span class="sh">"</span><span class="s">processes to run</span><span class="sh">"</span><span class="p">)</span>
<span class="mi">173</span> 
<span class="mi">174</span>     <span class="n">dtb</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">BaseTLB</span><span class="p">(</span><span class="nc">ArchDTB</span><span class="p">(),</span> <span class="sh">"</span><span class="s">Data TLB</span><span class="sh">"</span><span class="p">)</span>
<span class="mi">175</span>     <span class="n">itb</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">BaseTLB</span><span class="p">(</span><span class="nc">ArchITB</span><span class="p">(),</span> <span class="sh">"</span><span class="s">Instruction TLB</span><span class="sh">"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>As shown in the line 174-175, to instantiate the TLBs for data and instruction,
it invokes the constructor of the BaseTLB class. Note that this is not the 
python class yet, but a python class!
Also, X86TLB has been imported as ArchDTB and ArchITB.
Therefore, on the above code, BaseTLB instances are populated with 
X86TLB class.</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">BaseTLB</span><span class="p">(</span><span class="n">SimObject</span><span class="p">):</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="sh">'</span><span class="s">BaseTLB</span><span class="sh">'</span>
    <span class="n">abstract</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">cxx_header</span> <span class="o">=</span> <span class="sh">"</span><span class="s">arch/generic/tlb.hh</span><span class="sh">"</span>
    <span class="c1"># Ports to connect with other TLB levels
</span>    <span class="n">slave</span>  <span class="o">=</span> <span class="nc">VectorSlavePort</span><span class="p">(</span><span class="sh">"</span><span class="s">Port closer to the CPU side</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">master</span> <span class="o">=</span> <span class="nc">MasterPort</span><span class="p">(</span><span class="sh">"</span><span class="s">Port closer to memory side</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">X86TLB</span><span class="p">(</span><span class="n">BaseTLB</span><span class="p">):</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="sh">'</span><span class="s">X86TLB</span><span class="sh">'</span>
    <span class="n">cxx_class</span> <span class="o">=</span> <span class="sh">'</span><span class="s">X86ISA::TLB</span><span class="sh">'</span>
    <span class="n">cxx_header</span> <span class="o">=</span> <span class="sh">'</span><span class="s">arch/x86/tlb.hh</span><span class="sh">'</span>
    <span class="n">size</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">Unsigned</span><span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="sh">"</span><span class="s">TLB size</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">system</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">System</span><span class="p">(</span><span class="n">Parent</span><span class="p">.</span><span class="nb">any</span><span class="p">,</span> <span class="sh">"</span><span class="s">system object</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">walker</span> <span class="o">=</span> <span class="n">Param</span><span class="p">.</span><span class="nc">X86PagetableWalker</span><span class="p">(</span>\
            <span class="nc">X86PagetableWalker</span><span class="p">(),</span> <span class="sh">"</span><span class="s">page table walker</span><span class="sh">"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Because BaseTLB class doesn’t have any constructor definition dedicated for
X86TLB class, it will invoke the SimObject’s constructor.</p>

<h3 id="generated-params"><span class="me-2">Generated Params</span><a href="#generated-params" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p><em>gem5/build/X86/params/BaseTLB.hh</em></p>
<div class="language-cpp highlighter-rouge"><div class="code-header">
        <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre>  <span class="mi">1</span> <span class="err">#</span><span class="n">ifndef</span> <span class="n">__PARAMS__BaseTLB__</span>
  <span class="mi">2</span> <span class="err">#</span><span class="n">define</span> <span class="n">__PARAMS__BaseTLB__</span>
  <span class="mi">3</span> 
  <span class="mi">4</span> <span class="k">class</span> <span class="nc">BaseTLB</span><span class="p">;</span>
  <span class="mi">5</span> 
  <span class="mi">6</span> <span class="err">#</span><span class="n">include</span> <span class="s">"params/SimObject.hh"</span>
  <span class="mi">7</span> 
  <span class="mi">8</span> <span class="k">struct</span> <span class="nc">BaseTLBParams</span>
  <span class="mi">9</span>     <span class="o">:</span> <span class="k">public</span> <span class="n">SimObjectParams</span>
 <span class="mi">10</span> <span class="p">{</span>
 <span class="mi">11</span>     <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">port_master_connection_count</span><span class="p">;</span>
 <span class="mi">12</span>     <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">port_slave_connection_count</span><span class="p">;</span>
 <span class="mi">13</span> <span class="p">};</span>
 <span class="mi">14</span> 
 <span class="mi">15</span> <span class="err">#</span><span class="n">endif</span> <span class="c1">// __PARAMS__BaseTLB__</span>
</pre></td></tr></tbody></table></code></div></div>

<p><em>gem5/build/X86/params/X86TLB.hh</em></p>
<div class="language-cpp highlighter-rouge"><div class="code-header">
        <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="rouge-code"><pre><span class="cp">#ifndef __PARAMS__X86TLB__
#define __PARAMS__X86TLB__
</span>
<span class="k">namespace</span> <span class="n">X86ISA</span> <span class="p">{</span>
<span class="k">class</span> <span class="nc">TLB</span><span class="p">;</span>
<span class="p">}</span> <span class="c1">// namespace X86ISA</span>
<span class="cp">#include</span> <span class="cpf">&lt;cstddef&gt;</span><span class="cp">
#include</span> <span class="cpf">"base/types.hh"</span><span class="cp">
#include</span> <span class="cpf">&lt;cstddef&gt;</span><span class="cp">
#include</span> <span class="cpf">"params/System.hh"</span><span class="cp">
#include</span> <span class="cpf">&lt;cstddef&gt;</span><span class="cp">
#include</span> <span class="cpf">"params/X86PagetableWalker.hh"</span><span class="cp">
</span>
<span class="cp">#include</span> <span class="cpf">"params/BaseTLB.hh"</span><span class="cp">
</span>
<span class="k">struct</span> <span class="nc">X86TLBParams</span>
    <span class="o">:</span> <span class="k">public</span> <span class="n">BaseTLBParams</span>
<span class="p">{</span>
    <span class="n">X86ISA</span><span class="o">::</span><span class="n">TLB</span> <span class="o">*</span> <span class="n">create</span><span class="p">();</span>
    <span class="kt">unsigned</span> <span class="n">size</span><span class="p">;</span>
    <span class="n">System</span> <span class="o">*</span> <span class="n">system</span><span class="p">;</span>
    <span class="n">X86ISA</span><span class="o">::</span><span class="n">Walker</span> <span class="o">*</span> <span class="n">walker</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#endif // __PARAMS__X86TLB__
</span></pre></td></tr></tbody></table></code></div></div>

<h3 id="how-to-generate-params"><span class="me-2">How to generate params?</span><a href="#how-to-generate-params" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p><em>gem5/src/python/m5/params.py</em></p>
<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre></td><td class="rouge-code"><pre><span class="mi">2074</span> <span class="c1"># Port description object.  Like a ParamDesc object, this represents a
</span><span class="mi">2075</span> <span class="c1"># logical port in the SimObject class, not a particular port on a
</span><span class="mi">2076</span> <span class="c1"># SimObject instance.  The latter are represented by PortRef objects.
</span><span class="mi">2077</span> <span class="k">class</span> <span class="nc">Port</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="mi">2078</span>     <span class="c1"># Port("role", "description")
</span><span class="mi">2079</span> 
<span class="mi">2080</span>     <span class="n">_compat_dict</span> <span class="o">=</span> <span class="p">{</span> <span class="p">}</span>
<span class="mi">2081</span> 
<span class="mi">2082</span>     <span class="nd">@classmethod</span>
<span class="mi">2083</span>     <span class="k">def</span> <span class="nf">compat</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">peer</span><span class="p">):</span>
<span class="mi">2084</span>         <span class="n">cls</span><span class="p">.</span><span class="n">_compat_dict</span><span class="p">.</span><span class="nf">setdefault</span><span class="p">(</span><span class="n">role</span><span class="p">,</span> <span class="nf">set</span><span class="p">()).</span><span class="nf">add</span><span class="p">(</span><span class="n">peer</span><span class="p">)</span>
<span class="mi">2085</span>         <span class="n">cls</span><span class="p">.</span><span class="n">_compat_dict</span><span class="p">.</span><span class="nf">setdefault</span><span class="p">(</span><span class="n">peer</span><span class="p">,</span> <span class="nf">set</span><span class="p">()).</span><span class="nf">add</span><span class="p">(</span><span class="n">role</span><span class="p">)</span>
<span class="mi">2086</span> 
<span class="mi">2087</span>     <span class="nd">@classmethod</span>
<span class="mi">2088</span>     <span class="k">def</span> <span class="nf">is_compat</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">one</span><span class="p">,</span> <span class="n">two</span><span class="p">):</span>
<span class="mi">2089</span>         <span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="n">one</span><span class="p">,</span> <span class="n">two</span><span class="p">:</span>
<span class="mi">2090</span>             <span class="k">if</span> <span class="ow">not</span> <span class="n">port</span><span class="p">.</span><span class="n">role</span> <span class="ow">in</span> <span class="n">Port</span><span class="p">.</span><span class="n">_compat_dict</span><span class="p">:</span>
<span class="mi">2091</span>                 <span class="nf">fatal</span><span class="p">(</span><span class="sh">"</span><span class="s">Unrecognized role </span><span class="sh">'</span><span class="s">%s</span><span class="sh">'</span><span class="s"> for port %s</span><span class="se">\n</span><span class="sh">"</span><span class="p">,</span> <span class="n">port</span><span class="p">.</span><span class="n">role</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span>
<span class="mi">2092</span>         <span class="k">return</span> <span class="n">one</span><span class="p">.</span><span class="n">role</span> <span class="ow">in</span> <span class="n">Port</span><span class="p">.</span><span class="n">_compat_dict</span><span class="p">[</span><span class="n">two</span><span class="p">.</span><span class="n">role</span><span class="p">]</span>
<span class="mi">2093</span> 
<span class="mi">2094</span>     <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">role</span><span class="p">,</span> <span class="n">desc</span><span class="p">,</span> <span class="n">is_source</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
<span class="mi">2095</span>         <span class="n">self</span><span class="p">.</span><span class="n">desc</span> <span class="o">=</span> <span class="n">desc</span>
<span class="mi">2096</span>         <span class="n">self</span><span class="p">.</span><span class="n">role</span> <span class="o">=</span> <span class="n">role</span>
<span class="mi">2097</span>         <span class="n">self</span><span class="p">.</span><span class="n">is_source</span> <span class="o">=</span> <span class="n">is_source</span>
<span class="mi">2098</span> 
<span class="mi">2099</span>     <span class="c1"># Generate a PortRef for this port on the given SimObject with the
</span><span class="mi">2100</span>     <span class="c1"># given name
</span><span class="mi">2101</span>     <span class="k">def</span> <span class="nf">makeRef</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">simobj</span><span class="p">):</span>
<span class="mi">2102</span>         <span class="k">return</span> <span class="nc">PortRef</span><span class="p">(</span><span class="n">simobj</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">role</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">is_source</span><span class="p">)</span>
<span class="mi">2103</span> 
<span class="mi">2104</span>     <span class="c1"># Connect an instance of this port (on the given SimObject with
</span><span class="mi">2105</span>     <span class="c1"># the given name) with the port described by the supplied PortRef
</span><span class="mi">2106</span>     <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">simobj</span><span class="p">,</span> <span class="n">ref</span><span class="p">):</span>
<span class="mi">2107</span>         <span class="n">self</span><span class="p">.</span><span class="nf">makeRef</span><span class="p">(</span><span class="n">simobj</span><span class="p">).</span><span class="nf">connect</span><span class="p">(</span><span class="n">ref</span><span class="p">)</span>
<span class="mi">2108</span> 
<span class="mi">2109</span>     <span class="c1"># No need for any pre-declarations at the moment as we merely rely
</span><span class="mi">2110</span>     <span class="c1"># on an unsigned int.
</span><span class="mi">2111</span>     <span class="k">def</span> <span class="nf">cxx_predecls</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
<span class="mi">2112</span>         <span class="k">pass</span>
<span class="mi">2113</span> 
<span class="mi">2114</span>     <span class="k">def</span> <span class="nf">pybind_predecls</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
<span class="mi">2115</span>         <span class="n">cls</span><span class="p">.</span><span class="nf">cxx_predecls</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span>
<span class="mi">2116</span> 
<span class="mi">2117</span>     <span class="c1"># Declare an unsigned int with the same name as the port, that
</span><span class="mi">2118</span>     <span class="c1"># will eventually hold the number of connected ports (and thus the
</span><span class="mi">2119</span>     <span class="c1"># number of elements for a VectorPort).
</span><span class="mi">2120</span>     <span class="k">def</span> <span class="nf">cxx_decl</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
<span class="mi">2121</span>         <span class="nf">code</span><span class="p">(</span><span class="sh">'</span><span class="s">unsigned int port_$_connection_count;</span><span class="sh">'</span><span class="p">)</span>

</pre></td></tr></tbody></table></code></div></div>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/gem5/">GEM5</a>
      </div>
    

    <!-- tags -->
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a
        href="https://twitter.com/intent/tweet?text=Basecpu%20-%20Ruach&url=https%3A%2F%2Fruach.github.io%2Fposts%2Fbasecpu%2F"
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Twitter"
        target="_blank"
        rel="noopener"
        aria-label="Twitter"
      >
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a
        href="https://www.facebook.com/sharer/sharer.php?title=Basecpu%20-%20Ruach&u=https%3A%2F%2Fruach.github.io%2Fposts%2Fbasecpu%2F"
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Facebook"
        target="_blank"
        rel="noopener"
        aria-label="Facebook"
      >
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a
        href="https://t.me/share/url?url=https%3A%2F%2Fruach.github.io%2Fposts%2Fbasecpu%2F&text=Basecpu%20-%20Ruach"
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Telegram"
        target="_blank"
        rel="noopener"
        aria-label="Telegram"
      >
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

      

      <a
        href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fruach.github.io%2Fposts%2Fbasecpu%2F"
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Linkedin"
        target="_blank"
        rel="noopener"
        aria-label="Linkedin"
      >
        <i class="fa-fw fab fa-linkedin"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get the last 5 posts from lastmod list. -->















              <!-- The trending tags list -->


















            </div>

            
              
              



  <section id="toc-wrapper" class="ps-0 pe-4">
    <h2 class="panel-heading ps-3 pt-2 mb-2">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->














  

  
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/gem5-event-loop/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1589947200"
  data-df="ll"
  
>
  May 20, 2020
</time>

              <h4 class="pt-0 my-2">Gem5 Event Loop</h4>
              <div class="text-muted">
                <p>
                  





                  I covered how GEM5 configures the hardware parameters through the python script.
Also, in this posting I explained details how python can instantiate the 
CPP classes that actually simulate hardwar...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/template-generating-microop/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1591070400"
  data-df="ll"
  
>
  Jun  2, 2020
</time>

              <h4 class="pt-0 my-2">Template Generating Microop</h4>
              <div class="text-muted">
                <p>
                  





                  Automatic CPP Class Generation for Macroop and Microop
In this post, we will continue to make use of the parser and the grammar defined 
to understand the Domain Specific Language (DSL) of GEM5. Be...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/O3-CPU-GEM5/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1622001600"
  data-df="ll"
  
>
  May 26, 2021
</time>

              <h4 class="pt-0 my-2">O3 Cpu Gem5</h4>
              <div class="text-muted">
                <p>
                  





                  Python derives O3CPU through DerivO3CPU class
To understand particular processor in the GEM5, 
it is easy to start from the script that instantiate the processor. 
We can easily find that lots of G...
                </p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/O3-cache-block/"
      class="btn btn-outline-primary"
      aria-label="Older"
    >
      <p>O3 Cache Block</p>
    </a>
  

  
    <a
      href="/posts/gem5-interrupt-handling-o3/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>Gem5 Interrupt Handling O3</p>
    </a>
  
</nav>

            
              
              <!--  The comments switcher -->

  
  <!-- The Disqus lazy loading. -->

<div id="disqus_thread">
  <p class="text-center text-muted small">Comments powered by <a href="https://disqus.com/">Disqus</a>.</p>
</div>

<script type="text/javascript">
  var disqus_config = function () {
    this.page.url = 'https://ruach.github.io/posts/basecpu/';
    this.page.identifier = '/posts/basecpu/';
  };

  /* Lazy loading */
  var disqus_observer = new IntersectionObserver(
    function (entries) {
      if (entries[0].isIntersecting) {
        (function () {
          var d = document,
            s = d.createElement('script');
          s.src = 'https://ruach.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();

        disqus_observer.disconnect();
      }
    },
    { threshold: [0] }
  );

  disqus_observer.observe(document.querySelector('#disqus_thread'));

  /* Auto switch theme */
  function reloadDisqus() {
    if (event.source === window && event.data && event.data.direction === ModeToggle.ID) {
      /* Disqus hasn't been loaded */
      if (typeof DISQUS === 'undefined') {
        return;
      }

      if (document.readyState == 'complete') {
        DISQUS.reset({ reload: true, config: disqus_config });
      }
    }
  }

  if (document.querySelector('.mode-toggle')) {
    window.addEventListener('message', reloadDisqus);
  }
</script>



            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>
    ©
    <time>2023</time>
    <a href="https://ruach.github.io">Jaehyuk Lee</a>.
    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->


















    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->

    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/en.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.21.2/dist/tocbot.min.js"></script>






<script defer src="/assets/js/dist/post.min.js"></script>






    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  /* Note: dependent library will be loaded in `js-selector.html` */
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5"></p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>

  </body>
</html>

